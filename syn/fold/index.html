<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="generator" content="rustdoc"><meta name="description" content="Syntax tree traversal to transform the nodes of an owned syntax tree."><title>syn::fold - Rust</title><script>if(window.location.protocol!=="file:")document.head.insertAdjacentHTML("beforeend","SourceSerif4-Regular-6b053e98.ttf.woff2,FiraSans-Italic-81dc35de.woff2,FiraSans-Regular-0fe48ade.woff2,FiraSans-MediumItalic-ccf7e434.woff2,FiraSans-Medium-e1aa3f0a.woff2,SourceCodePro-Regular-8badfe75.ttf.woff2,SourceCodePro-Semibold-aa29a496.ttf.woff2".split(",").map(f=>`<link rel="preload" as="font" type="font/woff2" crossorigin href="../../static.files/${f}">`).join(""))</script><link rel="stylesheet" href="../../static.files/normalize-9960930a.css"><link rel="stylesheet" href="../../static.files/rustdoc-916cea96.css"><meta name="rustdoc-vars" data-root-path="../../" data-static-root-path="../../static.files/" data-current-crate="syn" data-themes="" data-resource-suffix="" data-rustdoc-version="1.87.0 (17067e9ac 2025-05-09)" data-channel="1.87.0" data-search-js="search-e7298875.js" data-settings-js="settings-d72f25bb.js" ><script src="../../static.files/storage-82c7156e.js"></script><script defer src="../sidebar-items.js"></script><script defer src="../../static.files/main-fb8c74a8.js"></script><noscript><link rel="stylesheet" href="../../static.files/noscript-893ab5e7.css"></noscript><link rel="alternate icon" type="image/png" href="../../static.files/favicon-32x32-6580c154.png"><link rel="icon" type="image/svg+xml" href="../../static.files/favicon-044be391.svg"></head><body class="rustdoc mod"><!--[if lte IE 11]><div class="warning">This old browser is unsupported and will most likely display funky things.</div><![endif]--><nav class="mobile-topbar"><button class="sidebar-menu-toggle" title="show sidebar"></button></nav><nav class="sidebar"><div class="sidebar-crate"><h2><a href="../../syn/index.html">syn</a><span class="version">2.0.104</span></h2></div><div class="sidebar-elems"><section id="rustdoc-toc"><h2 class="location"><a href="#">Module fold</a></h2><h3><a href="#">Sections</a></h3><ul class="block top-toc"><li><a href="#example" title="Example">Example</a></li></ul><h3><a href="#traits">Module Items</a></h3><ul class="block"><li><a href="#traits" title="Traits">Traits</a></li><li><a href="#functions" title="Functions">Functions</a></li></ul></section><div id="rustdoc-modnav"><h2 class="in-crate"><a href="../index.html">In crate syn</a></h2></div></div></nav><div class="sidebar-resizer"></div><main><div class="width-limiter"><rustdoc-search></rustdoc-search><section id="main-content" class="content"><div class="main-heading"><div class="rustdoc-breadcrumbs"><a href="../index.html">syn</a></div><h1>Module <span>fold</span><button id="copy-path" title="Copy item path to clipboard">Copy item path</button></h1><rustdoc-toolbar></rustdoc-toolbar><span class="sub-heading"><a class="src" href="../../src/syn/gen/fold.rs.html#4-3902">Source</a> </span></div><details class="toggle top-doc" open><summary class="hideme"><span>Expand description</span></summary><div class="docblock"><p>Syntax tree traversal to transform the nodes of an owned syntax tree.</p>
<p>Each method of the <a href="trait.Fold.html" title="trait syn::fold::Fold"><code>Fold</code></a> trait is a hook that can be overridden to
customize the behavior when transforming the corresponding type of node.
By default, every method recursively visits the substructure of the
input by invoking the right visitor method of each of its fields.</p>

<div class="example-wrap"><pre class="rust rust-example-rendered"><code><span class="kw">pub trait </span>Fold {
    <span class="comment">/* ... */

    </span><span class="kw">fn </span>fold_expr_binary(<span class="kw-2">&amp;mut </span><span class="self">self</span>, node: ExprBinary) -&gt; ExprBinary {
        fold_expr_binary(<span class="self">self</span>, node)
    }

    <span class="comment">/* ... */
</span>}

<span class="kw">pub fn </span>fold_expr_binary&lt;V&gt;(v: <span class="kw-2">&amp;mut </span>V, node: ExprBinary) -&gt; ExprBinary
<span class="kw">where
    </span>V: Fold + <span class="question-mark">?</span>Sized,
{
    ExprBinary {
        attrs: node
            .attrs
            .into_iter()
            .map(|attr| v.fold_attribute(attr))
            .collect(),
        left: Box::new(v.fold_expr(<span class="kw-2">*</span>node.left)),
        op: v.fold_bin_op(node.op),
        right: Box::new(v.fold_expr(<span class="kw-2">*</span>node.right)),
    }
}

<span class="comment">/* ... */</span></code></pre></div>
<br>
<h2 id="example"><a class="doc-anchor" href="#example">ยง</a>Example</h2>
<p>This fold inserts parentheses to fully parenthesizes any expression.</p>

<div class="example-wrap"><pre class="rust rust-example-rendered"><code><span class="comment">// [dependencies]
// quote = "1.0"
// syn = { version = "2.0", features = ["fold", "full"] }

</span><span class="kw">use </span>quote::quote;
<span class="kw">use </span>syn::fold::{fold_expr, Fold};
<span class="kw">use </span>syn::{token, Expr, ExprParen};

<span class="kw">struct </span>ParenthesizeEveryExpr;

<span class="kw">impl </span>Fold <span class="kw">for </span>ParenthesizeEveryExpr {
    <span class="kw">fn </span>fold_expr(<span class="kw-2">&amp;mut </span><span class="self">self</span>, expr: Expr) -&gt; Expr {
        Expr::Paren(ExprParen {
            attrs: Vec::new(),
            expr: Box::new(fold_expr(<span class="self">self</span>, expr)),
            paren_token: token::Paren::default(),
        })
    }
}

<span class="kw">fn </span>main() {
    <span class="kw">let </span>code = <span class="macro">quote!</span> { a() + b(<span class="number">1</span>) * c.d };
    <span class="kw">let </span>expr: Expr = syn::parse2(code).unwrap();
    <span class="kw">let </span>parenthesized = ParenthesizeEveryExpr.fold_expr(expr);
    <span class="macro">println!</span>(<span class="string">"{}"</span>, <span class="macro">quote!</span>(#parenthesized));

    <span class="comment">// Output: (((a)()) + (((b)((1))) * ((c).d)))
</span>}</code></pre></div>
</div></details><h2 id="traits" class="section-header">Traits<a href="#traits" class="anchor">ยง</a></h2><dl class="item-table"><dt><a class="trait" href="trait.Fold.html" title="trait syn::fold::Fold">Fold</a></dt><dd>Syntax tree traversal to transform the nodes of an owned syntax tree.</dd></dl><h2 id="functions" class="section-header">Functions<a href="#functions" class="anchor">ยง</a></h2><dl class="item-table"><dt><a class="fn" href="fn.fold_abi.html" title="fn syn::fold::fold_abi">fold_<wbr>abi</a></dt><dt><a class="fn" href="fn.fold_angle_bracketed_generic_arguments.html" title="fn syn::fold::fold_angle_bracketed_generic_arguments">fold_<wbr>angle_<wbr>bracketed_<wbr>generic_<wbr>arguments</a></dt><dt><a class="fn" href="fn.fold_assoc_const.html" title="fn syn::fold::fold_assoc_const">fold_<wbr>assoc_<wbr>const</a></dt><dt><a class="fn" href="fn.fold_assoc_type.html" title="fn syn::fold::fold_assoc_type">fold_<wbr>assoc_<wbr>type</a></dt><dt><a class="fn" href="fn.fold_attr_style.html" title="fn syn::fold::fold_attr_style">fold_<wbr>attr_<wbr>style</a></dt><dt><a class="fn" href="fn.fold_attribute.html" title="fn syn::fold::fold_attribute">fold_<wbr>attribute</a></dt><dt><a class="fn" href="fn.fold_bare_fn_arg.html" title="fn syn::fold::fold_bare_fn_arg">fold_<wbr>bare_<wbr>fn_<wbr>arg</a></dt><dt><a class="fn" href="fn.fold_bare_variadic.html" title="fn syn::fold::fold_bare_variadic">fold_<wbr>bare_<wbr>variadic</a></dt><dt><a class="fn" href="fn.fold_bin_op.html" title="fn syn::fold::fold_bin_op">fold_<wbr>bin_<wbr>op</a></dt><dt><a class="fn" href="fn.fold_bound_lifetimes.html" title="fn syn::fold::fold_bound_lifetimes">fold_<wbr>bound_<wbr>lifetimes</a></dt><dt><a class="fn" href="fn.fold_const_param.html" title="fn syn::fold::fold_const_param">fold_<wbr>const_<wbr>param</a></dt><dt><a class="fn" href="fn.fold_constraint.html" title="fn syn::fold::fold_constraint">fold_<wbr>constraint</a></dt><dt><a class="fn" href="fn.fold_data.html" title="fn syn::fold::fold_data">fold_<wbr>data</a></dt><dt><a class="fn" href="fn.fold_data_enum.html" title="fn syn::fold::fold_data_enum">fold_<wbr>data_<wbr>enum</a></dt><dt><a class="fn" href="fn.fold_data_struct.html" title="fn syn::fold::fold_data_struct">fold_<wbr>data_<wbr>struct</a></dt><dt><a class="fn" href="fn.fold_data_union.html" title="fn syn::fold::fold_data_union">fold_<wbr>data_<wbr>union</a></dt><dt><a class="fn" href="fn.fold_derive_input.html" title="fn syn::fold::fold_derive_input">fold_<wbr>derive_<wbr>input</a></dt><dt><a class="fn" href="fn.fold_expr.html" title="fn syn::fold::fold_expr">fold_<wbr>expr</a></dt><dt><a class="fn" href="fn.fold_expr_binary.html" title="fn syn::fold::fold_expr_binary">fold_<wbr>expr_<wbr>binary</a></dt><dt><a class="fn" href="fn.fold_expr_call.html" title="fn syn::fold::fold_expr_call">fold_<wbr>expr_<wbr>call</a></dt><dt><a class="fn" href="fn.fold_expr_cast.html" title="fn syn::fold::fold_expr_cast">fold_<wbr>expr_<wbr>cast</a></dt><dt><a class="fn" href="fn.fold_expr_field.html" title="fn syn::fold::fold_expr_field">fold_<wbr>expr_<wbr>field</a></dt><dt><a class="fn" href="fn.fold_expr_group.html" title="fn syn::fold::fold_expr_group">fold_<wbr>expr_<wbr>group</a></dt><dt><a class="fn" href="fn.fold_expr_index.html" title="fn syn::fold::fold_expr_index">fold_<wbr>expr_<wbr>index</a></dt><dt><a class="fn" href="fn.fold_expr_lit.html" title="fn syn::fold::fold_expr_lit">fold_<wbr>expr_<wbr>lit</a></dt><dt><a class="fn" href="fn.fold_expr_macro.html" title="fn syn::fold::fold_expr_macro">fold_<wbr>expr_<wbr>macro</a></dt><dt><a class="fn" href="fn.fold_expr_method_call.html" title="fn syn::fold::fold_expr_method_call">fold_<wbr>expr_<wbr>method_<wbr>call</a></dt><dt><a class="fn" href="fn.fold_expr_paren.html" title="fn syn::fold::fold_expr_paren">fold_<wbr>expr_<wbr>paren</a></dt><dt><a class="fn" href="fn.fold_expr_path.html" title="fn syn::fold::fold_expr_path">fold_<wbr>expr_<wbr>path</a></dt><dt><a class="fn" href="fn.fold_expr_reference.html" title="fn syn::fold::fold_expr_reference">fold_<wbr>expr_<wbr>reference</a></dt><dt><a class="fn" href="fn.fold_expr_struct.html" title="fn syn::fold::fold_expr_struct">fold_<wbr>expr_<wbr>struct</a></dt><dt><a class="fn" href="fn.fold_expr_tuple.html" title="fn syn::fold::fold_expr_tuple">fold_<wbr>expr_<wbr>tuple</a></dt><dt><a class="fn" href="fn.fold_expr_unary.html" title="fn syn::fold::fold_expr_unary">fold_<wbr>expr_<wbr>unary</a></dt><dt><a class="fn" href="fn.fold_field.html" title="fn syn::fold::fold_field">fold_<wbr>field</a></dt><dt><a class="fn" href="fn.fold_field_mutability.html" title="fn syn::fold::fold_field_mutability">fold_<wbr>field_<wbr>mutability</a></dt><dt><a class="fn" href="fn.fold_field_value.html" title="fn syn::fold::fold_field_value">fold_<wbr>field_<wbr>value</a></dt><dt><a class="fn" href="fn.fold_fields.html" title="fn syn::fold::fold_fields">fold_<wbr>fields</a></dt><dt><a class="fn" href="fn.fold_fields_named.html" title="fn syn::fold::fold_fields_named">fold_<wbr>fields_<wbr>named</a></dt><dt><a class="fn" href="fn.fold_fields_unnamed.html" title="fn syn::fold::fold_fields_unnamed">fold_<wbr>fields_<wbr>unnamed</a></dt><dt><a class="fn" href="fn.fold_generic_argument.html" title="fn syn::fold::fold_generic_argument">fold_<wbr>generic_<wbr>argument</a></dt><dt><a class="fn" href="fn.fold_generic_param.html" title="fn syn::fold::fold_generic_param">fold_<wbr>generic_<wbr>param</a></dt><dt><a class="fn" href="fn.fold_generics.html" title="fn syn::fold::fold_generics">fold_<wbr>generics</a></dt><dt><a class="fn" href="fn.fold_ident.html" title="fn syn::fold::fold_ident">fold_<wbr>ident</a></dt><dt><a class="fn" href="fn.fold_index.html" title="fn syn::fold::fold_index">fold_<wbr>index</a></dt><dt><a class="fn" href="fn.fold_lifetime.html" title="fn syn::fold::fold_lifetime">fold_<wbr>lifetime</a></dt><dt><a class="fn" href="fn.fold_lifetime_param.html" title="fn syn::fold::fold_lifetime_param">fold_<wbr>lifetime_<wbr>param</a></dt><dt><a class="fn" href="fn.fold_lit.html" title="fn syn::fold::fold_lit">fold_<wbr>lit</a></dt><dt><a class="fn" href="fn.fold_lit_bool.html" title="fn syn::fold::fold_lit_bool">fold_<wbr>lit_<wbr>bool</a></dt><dt><a class="fn" href="fn.fold_lit_byte.html" title="fn syn::fold::fold_lit_byte">fold_<wbr>lit_<wbr>byte</a></dt><dt><a class="fn" href="fn.fold_lit_byte_str.html" title="fn syn::fold::fold_lit_byte_str">fold_<wbr>lit_<wbr>byte_<wbr>str</a></dt><dt><a class="fn" href="fn.fold_lit_char.html" title="fn syn::fold::fold_lit_char">fold_<wbr>lit_<wbr>char</a></dt><dt><a class="fn" href="fn.fold_lit_cstr.html" title="fn syn::fold::fold_lit_cstr">fold_<wbr>lit_<wbr>cstr</a></dt><dt><a class="fn" href="fn.fold_lit_float.html" title="fn syn::fold::fold_lit_float">fold_<wbr>lit_<wbr>float</a></dt><dt><a class="fn" href="fn.fold_lit_int.html" title="fn syn::fold::fold_lit_int">fold_<wbr>lit_<wbr>int</a></dt><dt><a class="fn" href="fn.fold_lit_str.html" title="fn syn::fold::fold_lit_str">fold_<wbr>lit_<wbr>str</a></dt><dt><a class="fn" href="fn.fold_macro.html" title="fn syn::fold::fold_macro">fold_<wbr>macro</a></dt><dt><a class="fn" href="fn.fold_macro_delimiter.html" title="fn syn::fold::fold_macro_delimiter">fold_<wbr>macro_<wbr>delimiter</a></dt><dt><a class="fn" href="fn.fold_member.html" title="fn syn::fold::fold_member">fold_<wbr>member</a></dt><dt><a class="fn" href="fn.fold_meta.html" title="fn syn::fold::fold_meta">fold_<wbr>meta</a></dt><dt><a class="fn" href="fn.fold_meta_list.html" title="fn syn::fold::fold_meta_list">fold_<wbr>meta_<wbr>list</a></dt><dt><a class="fn" href="fn.fold_meta_name_value.html" title="fn syn::fold::fold_meta_name_value">fold_<wbr>meta_<wbr>name_<wbr>value</a></dt><dt><a class="fn" href="fn.fold_parenthesized_generic_arguments.html" title="fn syn::fold::fold_parenthesized_generic_arguments">fold_<wbr>parenthesized_<wbr>generic_<wbr>arguments</a></dt><dt><a class="fn" href="fn.fold_path.html" title="fn syn::fold::fold_path">fold_<wbr>path</a></dt><dt><a class="fn" href="fn.fold_path_arguments.html" title="fn syn::fold::fold_path_arguments">fold_<wbr>path_<wbr>arguments</a></dt><dt><a class="fn" href="fn.fold_path_segment.html" title="fn syn::fold::fold_path_segment">fold_<wbr>path_<wbr>segment</a></dt><dt><a class="fn" href="fn.fold_predicate_lifetime.html" title="fn syn::fold::fold_predicate_lifetime">fold_<wbr>predicate_<wbr>lifetime</a></dt><dt><a class="fn" href="fn.fold_predicate_type.html" title="fn syn::fold::fold_predicate_type">fold_<wbr>predicate_<wbr>type</a></dt><dt><a class="fn" href="fn.fold_qself.html" title="fn syn::fold::fold_qself">fold_<wbr>qself</a></dt><dt><a class="fn" href="fn.fold_return_type.html" title="fn syn::fold::fold_return_type">fold_<wbr>return_<wbr>type</a></dt><dt><a class="fn" href="fn.fold_span.html" title="fn syn::fold::fold_span">fold_<wbr>span</a></dt><dt><a class="fn" href="fn.fold_trait_bound.html" title="fn syn::fold::fold_trait_bound">fold_<wbr>trait_<wbr>bound</a></dt><dt><a class="fn" href="fn.fold_trait_bound_modifier.html" title="fn syn::fold::fold_trait_bound_modifier">fold_<wbr>trait_<wbr>bound_<wbr>modifier</a></dt><dt><a class="fn" href="fn.fold_type.html" title="fn syn::fold::fold_type">fold_<wbr>type</a></dt><dt><a class="fn" href="fn.fold_type_array.html" title="fn syn::fold::fold_type_array">fold_<wbr>type_<wbr>array</a></dt><dt><a class="fn" href="fn.fold_type_bare_fn.html" title="fn syn::fold::fold_type_bare_fn">fold_<wbr>type_<wbr>bare_<wbr>fn</a></dt><dt><a class="fn" href="fn.fold_type_group.html" title="fn syn::fold::fold_type_group">fold_<wbr>type_<wbr>group</a></dt><dt><a class="fn" href="fn.fold_type_impl_trait.html" title="fn syn::fold::fold_type_impl_trait">fold_<wbr>type_<wbr>impl_<wbr>trait</a></dt><dt><a class="fn" href="fn.fold_type_infer.html" title="fn syn::fold::fold_type_infer">fold_<wbr>type_<wbr>infer</a></dt><dt><a class="fn" href="fn.fold_type_macro.html" title="fn syn::fold::fold_type_macro">fold_<wbr>type_<wbr>macro</a></dt><dt><a class="fn" href="fn.fold_type_never.html" title="fn syn::fold::fold_type_never">fold_<wbr>type_<wbr>never</a></dt><dt><a class="fn" href="fn.fold_type_param.html" title="fn syn::fold::fold_type_param">fold_<wbr>type_<wbr>param</a></dt><dt><a class="fn" href="fn.fold_type_param_bound.html" title="fn syn::fold::fold_type_param_bound">fold_<wbr>type_<wbr>param_<wbr>bound</a></dt><dt><a class="fn" href="fn.fold_type_paren.html" title="fn syn::fold::fold_type_paren">fold_<wbr>type_<wbr>paren</a></dt><dt><a class="fn" href="fn.fold_type_path.html" title="fn syn::fold::fold_type_path">fold_<wbr>type_<wbr>path</a></dt><dt><a class="fn" href="fn.fold_type_ptr.html" title="fn syn::fold::fold_type_ptr">fold_<wbr>type_<wbr>ptr</a></dt><dt><a class="fn" href="fn.fold_type_reference.html" title="fn syn::fold::fold_type_reference">fold_<wbr>type_<wbr>reference</a></dt><dt><a class="fn" href="fn.fold_type_slice.html" title="fn syn::fold::fold_type_slice">fold_<wbr>type_<wbr>slice</a></dt><dt><a class="fn" href="fn.fold_type_trait_object.html" title="fn syn::fold::fold_type_trait_object">fold_<wbr>type_<wbr>trait_<wbr>object</a></dt><dt><a class="fn" href="fn.fold_type_tuple.html" title="fn syn::fold::fold_type_tuple">fold_<wbr>type_<wbr>tuple</a></dt><dt><a class="fn" href="fn.fold_un_op.html" title="fn syn::fold::fold_un_op">fold_<wbr>un_<wbr>op</a></dt><dt><a class="fn" href="fn.fold_variant.html" title="fn syn::fold::fold_variant">fold_<wbr>variant</a></dt><dt><a class="fn" href="fn.fold_vis_restricted.html" title="fn syn::fold::fold_vis_restricted">fold_<wbr>vis_<wbr>restricted</a></dt><dt><a class="fn" href="fn.fold_visibility.html" title="fn syn::fold::fold_visibility">fold_<wbr>visibility</a></dt><dt><a class="fn" href="fn.fold_where_clause.html" title="fn syn::fold::fold_where_clause">fold_<wbr>where_<wbr>clause</a></dt><dt><a class="fn" href="fn.fold_where_predicate.html" title="fn syn::fold::fold_where_predicate">fold_<wbr>where_<wbr>predicate</a></dt></dl></section></div></main></body></html>